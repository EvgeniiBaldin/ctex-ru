%  -*- coding: koi8-r -*-
\input{structheader}
%\documentclass[a4paper,12pt,oneside,bibtotoc,idxtotoc,liststotoc]{scrbook} 
%\documentclass[a4paper,12pt,twoside]{scrbook} 
%\documentclass[draft,a4paper,12pt,oneside]{scrbook} 
\usepackage{cmap}
\usepackage[warn]{mathtext}
\usepackage[T2A]{fontenc}
\usepackage[koi8-r]{inputenc}
\usepackage[english,russian]{babel}
\usepackage{indentfirst}%first paragraph indent
%\usepackage[ps2pdf,unicode=true]{hyperref}
%\usepackage[breaklinks,hyperfootnotes=false,plainpages=false,unicode=true]{hyperref}
%\usepackage[plainpages=false,pdfpagelabels,breaklinks,hyperfootnotes=false,unicode=true]{hyperref}

\usepackage[breaklinks,hyperfootnotes=false,unicode=true]{hyperref}
\hypersetup{
  pdfencoding=auto,
  pdfinfo={
    Title={Computer Typesetting Using LaTeX},
    Author={Evgeny Baldin}
  }
}
\usepackage{misccorr}
\usepackage[Lenny]{fncychap}
%изменение расстояния между строчками
\usepackage{setspace}
\newcommand{\hmmax}{0}
\newcommand{\bmmax}{3}
\usepackage{ccicons}
\usepackage{color}
\usepackage{graphicx}
\usepackage{amssymb}
\usepackage{amscd}
\usepackage{amsfonts}
\usepackage{amsmath}
\usepackage{amsxtra}
\usepackage{srcltx}
\usepackage{textcomp}
\usepackage{floatflt} %отсутствует в TeX Live 2011
\usepackage{wrapfig}
\usepackage{afterpage}
\usepackage{ccaption}
\captiondelim{. }
\usepackage{nccfloats}
\usepackage{mcaption}
\usepackage{color}
\usepackage{placeins}
\usepackage{xspace}
\usepackage{algorithm}
\usepackage{algorithmic}
\usepackage{epigraph}
%убираем разделительную черту у эпиграфа
\setlength{\epigraphrule}{0pt}
\usepackage{listings}
\lstloadlanguages{bash,[LaTeX]TeX,MetaPost,Clean,lisp}
\lstset{language=[LaTeX]TeX,frame=tlbr,
  escapechar=|,extendedchars=true,
  keywordstyle={},
%  commentstyle=\itshape,
  commentstyle=,
%  stringstyle=\bfseries 
}
\usepackage{multirow}
\usepackage{makecell}
\usepackage{colortbl}
\usepackage{dcolumn}
\usepackage{slashbox} %отсутствует в TeX Live 2011
\usepackage{tabularx}
\usepackage{listliketab}
\usepackage{tabvar} %удалил в результате проблем со сборкой
\usepackage{pb-diagram}
\usepackage{slashed}

%алфавитные указатели
%\usepackage{makeidx}
\usepackage[split]{splitidx}

\usepackage{excludeonly} % добавляет команду excludeonly

%перенос формул в тексте
\newcommand*{\hm}[1]{#1\nobreak\discretionary{}%
  {\hbox{$\mathsurround=0pt #1$}}{}}



%команда url
\usepackage{url}
%заметки для дальнейшей доработки
\usepackage{fixme}
%подчерк в текстовой моде
\usepackage{underscore}
%декоративные символы
\usepackage{pifont}
%фонетические символы
\usepackage{tipa}
%научные символы
\usepackage{gensymb}
%научные символы и смайлики
%\usepackage[integrals]{wasysym}
\usepackage{wasysym}
%диаграммы импульсов
\usepackage{ifsym}
%компьютерные символы
\usepackage{marvosym}
%череп
%\usepackage{skull}
%окружение comment
\usepackage{verbatim}
%несколько колонок
\usepackage{multicol}
%svn информация
\usepackage{svn}
%компьютерные спецсимволы - клавиатура
%\usepackage{keystroke} - много с кем конфликтует - в основном алгоритмы
%компьютерные спецсимволы - LCD
\usepackage{lcd}
%битовые поля
\usepackage{bytefield}
%verbatim с \LaTeX-командами
\usepackage{alltt}
%fancyvrb - красивый verbatim
\usepackage{fancyvrb}
%eqlist - аналог description, но с одинаковыми отступами
\usepackage{eqlist}
%desclist - аналог description
\usepackage{desclist}
%внутриабзацные перечни
\usepackage{paralist}
%выделение текста
\usepackage{soul}
%выделение текста nctools
\usepackage{nccstretch}
%заливка шаблоном
\usepackage{mboxfill}
%теневой бокс
\usepackage{shadow}
%выравнивание по левому краю с переносами
\usepackage{ragged2e}
%ссылки
\usepackage{varioref}
%нумерация строк
\usepackage[hyperref]{lineno}
%формирование меток в зависимости от префикса
\usepackage{prettyref}
%сноски - ручной формат
\usepackage{nccfoots}
%боксы
\usepackage{nccboxes}
%отметки об изменениях какие-то проблемы с pdflatex
%\usepackage[outerbars]{changebar}
%Условный оператор
\usepackage{xifthen}
%разбор списков разделённых запятыми
\usepackage{tokenizer}
%многоколоночная вёрстка
\usepackage{multicol}
%параллельная печать
\usepackage{parallel}
%Дробь A/B
\usepackage{faktor}
%гарантия, что в таблице всегда будет промежуток между текстом и
%разделительной линией
\usepackage{cellspace}
%понятная печать числа - растаскивание каждых трёх цифр
\usepackage{numprint}
%переиспользование подстрочных примечаний
\usepackage{savefnmark}
%управление параметрами форматирования оглавления
\usepackage{tocloft}
%длинные таблицы
\usepackage{xtab}
%автоматический перенос гиперссылок
%\usepackage{breakurl}
% %глоссарий
% \usepackage{makeglos}
%история изменений
%\usepackage[nochapter,owncaptions]{vhistory}
%длинные таблицы
\usepackage{longtable}
%прямые греческие символы
%\usepackage{upgreek} %убрал в рамках борьбы с лишними матшрифтами
%перечёркивание формул
\usepackage{cancel}
%знаки евро
\usepackage{eurosym}
%Creative commons 
%\usepackage{cclicenses}
%производные
%\usepackage[medc]{esdiff}
%дифференциалы, производные и пределы
%\usepackage{commath}
%тензоры
%\usepackage{tensor}
%условные конструкции
\usepackage{cases}
%украшение выключенных формул
%\usepackage{empheq}
%\usepackage{fancybox}
%бра-кет нотация
%\usepackage{braket}
%СИ
%\usepackage{sistyle}
%HEP-имена частиц
%\usepackage{hepparticles}
%изотопы
\usepackage{isotope}
%фейнмановские диаграммы
%\usepackage{feyn}
\usepackage[version=3]{mhchem}
%фейнмановские диаграммы
%гитарные аккорды
\usepackage{guitar}
%музыка
%\usepackage{musixtex}
%\usepackage{tocbibind}

%двухколоночная вёрстка
\usepackage{cuted} %окружение strip - временный переход в
                    %одноколоночный режим
%\usepackage{flushend} %правильная балансировка колонок
%\usepackage{balance} %правильная балансировка колонок



%переопределение примечания для KOMA-script
%   [отступ до метки]{отступ}{отступ абзаца}
\deffootnote[2.5em]{1.5em}{1em}{\textsuperscript{\thefootnotemark}}
\setkomafont{sectioning}{\bfseries}
\setkomafont{descriptionlabel}{\bfseries}

%Промежуток до вспомогательных заголовков
\newlength{\TopHeaderSkip}
\setlength{\TopHeaderSkip}{1.5cm}
%промежуток между вспомогательным заголовком и текстом
\newlength{\AfterHeaderSkip}
\setlength{\AfterHeaderSkip}{1cm}
%Шрифт для заголовков
\newcommand{\MyHeaderFont}{\Huge\normalfont}
%
%\renewcommand{\paragraph}[1]{\paragraph{\protect #1.}}

%\renewcommand{\epsilon}{\varepsilon}


%Увеличение/уменьшение страницы на одну дополнительную строку текста
\newcommand{\longpage}{\enlargethispage{\baselineskip}}
\newcommand{\shortpage}{\enlargethispage{-\baselineskip}}


%backslash
\newcommand{\bs}{\symbol{'134}}
%degree
\newcommand{\grad}{\ensuremath{{}^{\circ}}\xspace}
%Обратите внимание
\newcommand{\Attention}{\textbullet\xspace}


%названия 
%\TeX-имена
\usepackage{texnames}
%\NCC лого
\newcommand{\NCC}{{\protect\AmSfont
  N\kern-.05em\lower.5ex\hbox{C}\kern.05emC}%
}
\newcommand{\mpost}{MetaPost}
\newcommand{\mfont}{\METAFONT}
\newcommand{\meta}{{\ttfamily META}\xspace}
\newcommand{\TeXLive}{\TeX\,Live\xspace}%\ttfamily
%жирный BibTeX
\newcommand{\BibTeXbf}{B{\uppercasesc \textsc{i}\kern-.025em \uppercasesc \textsc{b}}\kern-.08emT\kern-.1667em\lower.5ex\hbox{E}\kern-.125emX\spacefactor1000 \xspace}

% Алфавитный указатель
\makeindex
 
\newindex[Алфавитный указатель]{idx}
\newindex[Список пакетов]{pkg}%
\newindex[Указатель команд и окружений]{cmd}%
%Главный индекс
\newcommand{\mindex}[1]{\protect\sindex[idx]{#1}}
%Главный индекс - выделение жирным (статья посвящена этому термину)
\newcommand{\mindexemph}[1]{\protect\sindex[idx]{#1}}%|textbf


%внутренняя структура документа

%пример команды для набора имён команды из Путеводителя по LaTeX
% \newcommand{\Lcs}[1]{{\normalfont\ttfamily\bs#1}%
%                     \index{#1{\normalfont\ttfamily\bs#1}}}
%выделение названий пакетов
% Алфавитный указатель по пакетам
\newcommand{\textpkge}[1]{{\textbf{#1}}}
\newcommand{\textpkgh}[1]{\protect\sindex[pkg]{#1}}
\newcommand{\textpkg}[1]{\textpkge{#1}\textpkgh{#1}}
%выделение жирным (статья посвящена этому термину)
\newcommand{\textpkghemph}[1]{\textpkgh{#1}}%|textbf
\newcommand{\textpkgemph}[1]{\textpkge{#1}\textpkghemph{#1}}
%алфавитный указатель по командам  и окружениям
%выделение окружения
\newcommand{\textenve}[1]{{#1}}%\textbf{}
\newcommand{\textenvh}[1]{\protect\sindex[cmd]{#1}}
\newcommand{\textenv}[1]{\textenve{#1}\textenvh{#1}}
%выделение жирным (статья посвящена этому термину)
\newcommand{\textenvhemph}[1]{\textenvh{#1}}
\newcommand{\textenvemph}[1]{\textenve{#1}\textenvhemph{#1}}
%команда (бэкслэш в начале вставляет автоматически)
\newcommand{\textcmde}[1]{{\normalfont\bs#1}}
\newcommand{\textcmdh}[1]{%
  \protect\sindex[cmd]{#1@{\normalfont\bs#1}}}%\ttfamily
\newcommand{\textcmd}[1]{\textcmde{#1}\textcmdh{#1}}
%выделение жирным (статья посвящена этому термину)
\newcommand{\textcmdhemph}[1]{\textcmdh{#1}}
\newcommand{\textcmdemph}[1]{\textcmde{#1}\textcmdhemph{#1}}
%выделение жирным (статья посвящена этому термину)


% Общий алфавитный указатель
%программа
\newcommand{\textproge}[1]{{\textbf{#1}}}
\newcommand{\textprogh}[1]{\mindex{программа!#1}}
\newcommand{\textprog}[1]{\textproge{#1}}%\textprogh{#1}
%кодовая страница
\newcommand{\textcodepage}[1]{{#1}%
                       \mindex{кодовая страница!#1}}


% Выделение без включения в указатель
%выделение названий опций
\newcommand{\textopt}[1]{\mbox{\normalfont\ttfamily#1}}
%счётчик
\newcommand{\textcount}[1]{{#1}}%\textbf
%переменная
%\newcommand{\textvar}{\textbf}
%пункт меню
\newcommand{\textmenu}[1]{\textbf{#1}}
%выделение пути и имён файлов
\newcommand{\textpath}[1]{\texttt{#1}}
\newcommand{\textfile}[1]{\texttt{#1}}
\newcommand{\textext}[1]{\texttt{#1}} %расширение
\newcommand{\CTANpath}[1]{\{CTAN\}\texttt{#1}}

%Ширина для diamond
\newlength{\NoteWidth}
%\newcommand{\NoteSign}{$\diamondsuit$}
%\newcommand{\NoteSign}{\textbullet}
\newcommand{\NoteSign}{$\RHD$}
\settowidth{\NoteWidth}{\NoteSign\,}
%знак заметки - вероятно надо поменять на мордочку
\newcommand{\Note}{\hspace{-\NoteWidth}\NoteSign\,}
%знак присутствия более подробного описания  - вероятно надо поменять на что-то
\newcommand{\FullVersionSign}{\checkmark}
% \newcommand{\FullVersionSign}{$\diamondsuit$}
\newlength{\FullVersionWidth}
\settowidth{\FullVersionWidth}{\FullVersionSign\,}
\newcommand{\FullVersion}{\hspace{-\FullVersionWidth}\FullVersionSign\,}


%частицы для распадов и диаграмм
\newcommand{\ee}{\ensuremath{e^{+}e^{-}}\xspace}
\newcommand{\lele}{\ensuremath{\ell^{+}\ell^{-}}\xspace}
\newcommand{\mumu}{\ensuremath{\mu^{+}\mu^{-}}}
\newcommand{\tautau}{\ensuremath{\tau^{+}\tau^{-}}\xspace}



%листинг для команды в таблице
\newcommand{\lsttab}[2][!]{#2&\lstinline#1#2#1}

\usepackage{fancyhdr}
\fancypagestyle{plain}{%
  \fancyhf{}% clear all header and footer fields
  \fancyfoot{}
%  \fancyfoot[C]{\bfseries \thepage}% except the center
  \renewcommand{\headrulewidth}{0pt}%
  \renewcommand{\footrulewidth}{0pt}%
}

\pagestyle{plain}
%\pagestyle{fancy} %включаем пользовательский стиль
\fancyhead{}
\fancyhead[RO,LE]{\pagemark}
\renewcommand{\chaptermark}[1]{%
  \markboth{\chaptername\ \thechapter.\ #1}{}}
% \renewcommand{\sectionmark}[1]{%
%   \markboth{\sectionname%
%     \ \thesection.\ #1}{}}
\renewcommand{\sectionmark}[1]{\markright{\thesection.\ #1}}
\fancyhead[LO]{\rightmark}
\fancyhead[RE]{\leftmark}
\fancyfoot{}

%изменил пробел после заголовка параграфа
\makeatletter
\renewcommand{\paragraph}{\@startsection{paragraph}{4}{\z@}%
  {3.25ex \@plus1ex \@minus.2ex}%
  {-0.5em}%пробел после заголовка параграфа
  {\setlength{\parfillskip}{\z@ \@plus 1fil}%
    \raggedsection\normalfont\sectfont\nobreak\size@paragraph\nobreak}}
\makeatother


% \usepackage{scrpage2}
%\pagestyle{empty} %очищаем стиль страницы 


% \ohead{\pagemark}
% \ihead{\headmark}
% \cfoot{}


\usepackage{calc}
%окружение example
\usepackage{example}

%%Прямые интегралы - не работают с пакетом skull
%% Определяем свой шрифт "lsumb" 
%\DeclareSymbolFont{lsymb}{U}{euex}{m}{n} 
%% Определяем интегралы 
%\DeclareMathSymbol{\intop}{\mathop}{lsymb}{"52} 
%\DeclareMathSymbol{\ointop}{\mathop}{lsymb}{"48} 
%\DeclareMathSymbol{\smallint}{\mathop}{lsymb}{"52} 

%для tables.tex
\newcounter{tabenum}\setcounter{tabenum}{0}


%подавление висячих строк.
\clubpenalty=10000 \widowpenalty=10000

%определение ширины maxwidth=max(родное разрешение,ширина текста)
\makeatletter
\newcommand{\maxwidth}{%
 \ifdim\Gin@nat@width>\linewidth
    \linewidth
 \else
    \Gin@nat@width
 \fi
}
\makeatother


%краткое оглавление
%\usepackage{shorttoc}
\makeatletter
\def\@startshorttoc#1{\bgroup
  \makeatletter
  \@input{\jobname.#1}%
  \global\@nobreakfalse \egroup}
\def\sht@startshorttoc#1#2{\bgroup
  \makeatletter
  \@input{#2.#1}%
  \global\@nobreakfalse \egroup}
\newif\if@tightshtoc \@tightshtocfalse
\def\shorttableofcontents#1#2{\bgroup\c@tocdepth=#2\@restonecolfalse
  {\section*{}}%
  \@startshorttoc{toc}\egroup}
\makeatother



%%% Local Variables: 
%%% mode: latex
%%% TeX-master: "ctex"
%%% End: 
